#!/usr/bin/env bash
set -euo pipefail

# Print the Strava OAuth authorize URL.
# Requires STRAVA_CLIENT_ID in env file (default ~/.config/strava.env).

DIR="$(cd "$(dirname "${BASH_SOURCE[0]}")" && pwd)"
# shellcheck disable=SC1091
. "$DIR/strava-lib.sh"
strava_load_env

BASE="https://www.strava.com/oauth/authorize"
Q1="client_id=${STRAVA_CLIENT_ID}"
Q2="response_type=code"
Q3="redirect_uri=http://localhost/exchange_token"
Q4="approval_prompt=force"
Q5="scope=read,activity:read_all"

echo "${BASE}?${Q1}&${Q2}&${Q3}&${Q4}&${Q5}"
